
```sql
	--用户关注的名字对照表
	create view user_friends
	as
	(select users.id as user_id ,users.name as user_name x.id as friend_id,x.name as friend_name from users,friends,users as x
	where users.id=friends.user_id
	and
	x.id in (select friend_id from users))

	--users表触发器 删除一个用户时 顺便删除他的所有记录
	DELIMITER //
	 
	CREATE TRIGGER tri_delete
	  BEFORE DELETE ON users
	FOR EACH ROW
	BEGIN
	  DELETE FROM records WHERE user.id = OLD.id;
	END;
	//
	 
	DELIMITER ;
```

当用户删除一条说说时 要把这条评论也删除
使用触发器
CREATE TRIGGER `tri_del_comment` BEFORE DELETE ON `records`
 FOR EACH ROW delete from comments
	where
	OLD.id=comments.record_id



Loader parseName 591