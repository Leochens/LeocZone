
```sql
	--用户关注的名字对照表
	create view user_friends
	as
	(select users.id as user_id ,users.name as user_name x.id as friend_id,x.name as friend_name from users,friends,users as x
	where users.id=friends.user_id
	and
	x.id in (select friend_id from users))





	
	--users表触发器 删除一个用户时 顺便删除他的所有记录
	DELIMITER //
	 
	CREATE TRIGGER tri_delete
	  BEFORE DELETE ON users
	FOR EACH ROW
	BEGIN
	  DELETE FROM records WHERE user.id = OLD.id;
	END;
	//
	 
	DELIMITER ;
```
ALTER ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `record_comment` AS 
select 
`records`.`id` AS `record_id`,
`comments`.`id` AS `comment_id`,
`comments`.`comment_author_id` AS `comment_author_id`,
`comments`.`content` AS `content`,
`comments`.`parent_comment_id` AS `parent_comment_id`,
users.name as author_name,
comment_authors.name as comment_author
from records,comments,users,users as comment_authors
where 
`records`.`id` = `comments`.`record_id` and
users.id = records.user_id and 
comments.comment_author_id=comment_authors.id

Loader parseName 591